{"ast":null,"code":"import _extends from \"C:\\\\BoxTracker-React\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/extends\";\nvar _jsxFileName = \"C:\\\\BoxTracker-React\\\\src\\\\Pages\\\\LoginForm.jsx\";\nimport React from 'react';\nimport Header from \"./../Components/Headers/Header\";\nimport HeaderLinks from \"./../Components/Headers/HeaderLinks\";\nimport Toolbar from \"@material-ui/core/Toolbar\"; //import userService from '../Services/userService';\n\nimport '../App.css';\nimport '../Menu.css';\n\nclass LoginForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      username: '',\n      password: '',\n      submitted: false,\n      loading: false,\n      error: ''\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleChange(e) {\n    const _e$target = e.target,\n          name = _e$target.name,\n          value = _e$target.value;\n    this.setState({\n      [name]: value\n    });\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n    this.setState({\n      submitted: true\n    });\n    const _this$state = this.state,\n          username = _this$state.username,\n          password = _this$state.password,\n          returnUrl = _this$state.returnUrl; // stop here if form is invalid\n\n    if (!(username && password)) {\n      return;\n    }\n\n    this.setState({\n      loading: true\n    });\n    this.login(username, password).then(user => {\n      const _ref = this.props.location.state || {\n        from: {\n          pathname: \"/\"\n        }\n      },\n            from = _ref.from;\n\n      this.props.history.push(from);\n    }, error => this.setState({\n      error,\n      loading: false\n    }));\n  }\n\n  render() {\n    const _this$state2 = this.state,\n          username = _this$state2.username,\n          password = _this$state2.password,\n          submitted = _this$state2.submitted,\n          loading = _this$state2.loading,\n          error = _this$state2.error;\n\n    const rest = _extends({}, this.props);\n\n    return React.createElement(\"div\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, React.createElement(Header, Object.assign({\n      absolute: true,\n      fixed: true,\n      color: \"dark\",\n      brand: \"Box Tracker\",\n      rightLinks: React.createElement(HeaderLinks, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      })\n    }, rest, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    })), React.createElement(Toolbar, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }), React.createElement(\"header\", {\n      className: \"Menu-header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, \"Log In\")), React.createElement(\"form\", {\n      name: \"form\",\n      onSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: 'form-group' + (submitted && !username ? ' has-error' : ''),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"username\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, \"Username\"), React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      name: \"username\",\n      value: username,\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: 'form-group' + (submitted && !password ? ' has-error' : ''),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"password\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, \"Password\"), React.createElement(\"input\", {\n      type: \"password\",\n      className: \"form-control\",\n      name: \"password\",\n      value: password,\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"btn btn-primary\",\n      disabled: loading,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, \"Login\"), loading && React.createElement(\"img\", {\n      src: \"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }))));\n  }\n\n  login(username, password) {\n    //alert(\"Start login method\")\n    const requestOptions = {\n      method: 'POST',\n      headers: {\n        'content-type': 'application/json',\n        'authorization': 'Basic U3VwZXJVc2VyOlBBU1M='\n      },\n      body: JSON.stringify({\n        'username': username,\n        'password': password\n      })\n    };\n    return fetch(\"http://localhost:52773/BoxTracker/login\", requestOptions).then(this.handleResponse).then(user => {\n      // login successful if there's a user in the response\n      if (user) {\n        //alert(JSON.stringify(user))\n        // store user details and basic auth credentials in local storage \n        // to keep user logged in between page refreshes\n        user.authdata = window.btoa(username + ':' + password);\n        localStorage.setItem('user', JSON.stringify(user));\n        localStorage.setItem('operator_id', user.user_id);\n        localStorage.setItem('operator_name', user.user_name);\n        localStorage.setItem('Workstation', \"Preparation\"); //alert(\"Logged In!\")\n      }\n\n      return user;\n    });\n  }\n\n  logout() {\n    // remove user from local storage to log user out\n    localStorage.removeItem('user');\n    localStorage.removeItem('operator_id');\n  }\n\n  handleResponse(response) {\n    //alert(\"Response\")\n    return response.text().then(text => {\n      const data = text && JSON.parse(text);\n\n      if (!response.ok) {\n        //alert(\"test\")\n        if (response.status === 401) {\n          //alert(\"not OK, 401\")\n          // auto logout if 401 response returned from api\n          this.logout();\n          this.props.history.push('/login');\n        }\n\n        const error = data && data.message || response.statusText;\n        return Promise.reject(error);\n      }\n\n      return data;\n    });\n  }\n\n}\n\nexport default LoginForm;","map":{"version":3,"sources":["C:\\BoxTracker-React\\src\\Pages\\LoginForm.jsx"],"names":["React","Header","HeaderLinks","Toolbar","LoginForm","Component","constructor","props","state","username","password","submitted","loading","error","handleChange","bind","handleSubmit","e","target","name","value","setState","preventDefault","returnUrl","login","then","user","location","from","pathname","history","push","render","rest","requestOptions","method","headers","body","JSON","stringify","fetch","handleResponse","authdata","window","btoa","localStorage","setItem","user_id","user_name","logout","removeItem","response","text","data","parse","ok","status","message","statusText","Promise","reject"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport Header from \"./../Components/Headers/Header\";\r\nimport HeaderLinks from \"./../Components/Headers/HeaderLinks\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\n//import userService from '../Services/userService';\r\nimport '../App.css';\r\nimport '../Menu.css';\r\n\r\n\r\nclass LoginForm extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      username: '',\r\n      password: '',\r\n      submitted: false,\r\n      loading: false,\r\n      error: ''\r\n    };\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n  }\r\n\r\n  handleChange(e) {\r\n    const { name, value } = e.target;\r\n    this.setState({ [name]: value });\r\n}\r\n\r\nhandleSubmit(e)\r\n{\r\n  e.preventDefault();\r\n  this.setState({ submitted: true });\r\n  const { username, password, returnUrl } = this.state;\r\n  \r\n  // stop here if form is invalid\r\n  if (!(username && password))\r\n  {\r\n    \r\n    return;\r\n  }\r\n  \r\n  this.setState({ loading: true });\r\n  this.login(username, password)\r\n  .then\r\n  (\r\n    \r\n    user =>\r\n      {\r\n        const { from } = this.props.location.state || { from: { pathname: \"/\" } };\r\n        this.props.history.push(from);\r\n        \r\n      },\r\n      error => this.setState({ error, loading: false })\r\n    );\r\n}\r\n\r\n  render()\r\n  {\r\n    const { username, password, submitted, loading, error } = this.state;\r\n    const { ...rest } = this.props;\r\n    return (\r\n      <div className=\"App\">\r\n        \r\n        <Header\r\n                absolute\r\n                fixed\r\n                color=\"dark\"\r\n                brand=\"Box Tracker\"\r\n                rightLinks={<HeaderLinks />}\r\n                {...rest}\r\n            />\r\n            <Toolbar />\r\n            <header className=\"Menu-header\">\r\n          <p>Log In</p>\r\n        </header>\r\n        <form name=\"form\" onSubmit={this.handleSubmit}>\r\n          <div className={'form-group' + (submitted && !username ? ' has-error' : '')}>\r\n              <label htmlFor=\"username\">Username</label>\r\n              <input\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                name=\"username\"\r\n                value={username}\r\n                onChange={this.handleChange} />\r\n          </div>\r\n          <div className={'form-group' + (submitted && !password ? ' has-error' : '')}>\r\n              <label htmlFor=\"password\">Password</label>\r\n              <input\r\n                type=\"password\"\r\n                className=\"form-control\"\r\n                name=\"password\"\r\n                value={password}\r\n                onChange={this.handleChange} />\r\n          </div>\r\n          <div className=\"form-group\">\r\n              <button className=\"btn btn-primary\" disabled={loading}>Login</button>\r\n              {loading &&\r\n                  <img src=\"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==\" />\r\n              }\r\n          </div>\r\n          </form>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  login(username, password) {\r\n    //alert(\"Start login method\")\r\n\r\n    const requestOptions = {\r\n        method: 'POST',\r\n        headers: {\r\n            'content-type': 'application/json',\r\n            'authorization':'Basic U3VwZXJVc2VyOlBBU1M=',\r\n            },\r\n        body: JSON.stringify({'username': username, 'password': password})\r\n        };\r\n    return fetch(\"http://localhost:52773/BoxTracker/login\", requestOptions)\r\n        .then(this.handleResponse)\r\n        .then(user => {\r\n            // login successful if there's a user in the response\r\n            if (user) {\r\n                //alert(JSON.stringify(user))\r\n                // store user details and basic auth credentials in local storage \r\n                // to keep user logged in between page refreshes\r\n                user.authdata = window.btoa(username + ':' + password);\r\n                localStorage.setItem('user', JSON.stringify(user));\r\n                localStorage.setItem('operator_id', user.user_id);\r\n                localStorage.setItem('operator_name', user.user_name);\r\n                localStorage.setItem('Workstation', \"Preparation\")\r\n                //alert(\"Logged In!\")\r\n            }\r\n\r\n            return user;\r\n        });\r\n}\r\n\r\nlogout() {\r\n    // remove user from local storage to log user out\r\n    localStorage.removeItem('user');\r\n    localStorage.removeItem('operator_id');\r\n}\r\n\r\nhandleResponse(response) {\r\n    //alert(\"Response\")\r\n    return response.text().then(text => {\r\n        const data = text && JSON.parse(text);\r\n        if (!response.ok) {\r\n            //alert(\"test\")\r\n            if (response.status === 401) {\r\n                //alert(\"not OK, 401\")\r\n                // auto logout if 401 response returned from api\r\n                this.logout();\r\n                this.props.history.push('/login');\r\n            }\r\n\r\n            const error = (data && data.message) || response.statusText;\r\n            return Promise.reject(error);\r\n        }\r\n        return data;\r\n    });\r\n}\r\n\r\n}\r\n\r\n  export default LoginForm;"]},"metadata":{},"sourceType":"module"}